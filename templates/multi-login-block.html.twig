{#
/**
 * @file
 * Template for the Multi Login Block.
 *
 * Available variables:
 * - login_methods: Array of login methods, each containing:
 *   - id: Unique identifier for the method
 *   - label: Display label for the method
 *   - icon: Icon identifier for the method
 *   - content: Renderable content (form or markup)
 *   - tooltip: (optional) Tooltip text for the method
 *   - open_default: (optional) Boolean indicating if the method should be open by default
 * - help_icon: (optional) Help icon configuration containing:
 *   - enabled: Boolean to show/hide the help icon
 *   - url: URL to the help page
 *   - type: Type of icon ('text' or 'image')
 *   - image_url: URL to the image if type is 'image'
 */
#}

<div class="multi-login-block">
	{% if help_icon and help_icon.enabled %}
		<div class="multi-login-help-icon-wrapper">
			<button class="multi-login-help-icon" aria-label="{{ 'Help'|t }}" data-help-url="{{ help_icon.url }}">
				{% if help_icon.type == 'image' and help_icon.image_url %}
					{% set image_src = help_icon.image_url %}
					{% if image_src starts with 'public://' or image_src starts with 'private://' or image_src starts with 'temporary://' %}
						{% set image_src = image_src | file_url %}
					{% endif %}
					<img src="{{ image_src }}" alt="{{ 'Help'|t }}" class="help-icon-image" />
				{% else %}
					<span class="help-icon-symbol">?</span>
				{% endif %}
			</button>
		</div>
	{% endif %}

	{% for method in login_methods %}
		<details class="multi-login-method multi-login-method--{{ method.id }}" {% if method.open_default %} open {% endif %} {% if method.tooltip %} title="{{ method.tooltip|e('html_attr') }}" {% endif %}>
			<summary class="multi-login-summary">
				<span class="multi-login-icon multi-login-icon--{{ method.icon }}"></span>
				<span class="multi-login-label">{{ method.label }}</span>
			</summary>
			<div class="multi-login-content">
				{{ method.content }}
			</div>
		</details>
	{% endfor %}
</div>

{% if help_icon and help_icon.enabled %}
	<dialog id="multi-login-help-dialog" class="multi-login-help-dialog">
		<div class="multi-login-help-content" id="multi-login-help-content"></div>
		<button class="multi-login-help-close" aria-label="{{ 'Close'|t }}">{{ 'Close'|t }}</button>
	</dialog>
{% endif %}
